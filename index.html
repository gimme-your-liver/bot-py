<html>
<head>
<script>
var recognition = new webkitSpeechRecognition();
recognition.continuous = true;
//recognition.interimResults = true;
function start(){
recognition.onresult = function(event) {
console.log(event);
var output = document.getElementById("output");
output.innerHTML = "";
//for(var i=0; i<event.results.length; i++){
output.innerHTML = event.results[event.results.length - 1][0].transcript;
send();
//}
}
recognition.start();
}
</script>
</head>
<body>
<h1>Speech to text</h1>
<input id = "bStart" type = "button" value = "Start" onclick = "start();"></input>
<div id = "output"></div>

</body>

<script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>

<script type="text/javascript">
  function send() {
  $.ajax({
    method: "GET",
    url: '/speak/'+document.getElementById("output").innerHTML
  })
  }
</script>
</html>
