<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

<script>
var recognition = new webkitSpeechRecognition();
recognition.continuous = true;
//recognition.interimResults = true;
function start(){
recognition.onresult = function(event) {
console.log(event);
var output = document.getElementById("output");
output.innerHTML = "";
//for(var i=0; i<event.results.length; i++){
output.innerHTML = event.results[event.results.length - 1][0].transcript;
send();
//}
}
recognition.start();
}
</script>
</head>
<body class="background">
<div class="alert alert-primary alert-dismissible fade show" role="alert">
  <strong>Permission:</strong> Make sure you have allowed this website to use your microphone.
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="container">
<ul class="list-group">
  <div class="p-3 mb-2 bg-primary text-white">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>Orange</b></div>
</ul>
<p class="mx-auto" style="width: 200px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<b>G</b>im<b>m</b>e your <b>L</b>iver</p>
<input id = "bStart" type = "button" value = "Start" class="btn btn-primary" onclick = "start(); "></input>
<div id = "output" class=""></div>

<div class="spinner-border m-5" id="loader" role="status">
  <span class="sr-only">Loading...</span>
</div>
</div>
</div>
<style type="text/css">
  #loader {
    display: none;
  }
  .output {
      border: 2px #000;
      padding: 10px;
  }
  .background {
    background-image: url('bot.jpg');
  }
</style>


</body>


<script src="https://code.jquery.com/jquery-3.5.0.min.js" integrity="sha256-xNzN2a4ltkB44Mc/Jz3pT4iU1cmeR0FkXs4pru/JxaQ=" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script type="text/javascript">
  function send() {
    $("#loader")[0].style.display = 'inherit';
  $.ajax({
    method: "GET",
    url: '/speak/'+document.getElementById("output").innerHTML
  }).done(function () {
    $("#loader")[0].style.display = 'none';
  })
  }

</script>
</html>
